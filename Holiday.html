<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>DreamVacations - Your Perfect Holiday</title>
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css" rel="stylesheet">
  
  <style>
    :root {
      --primary-color: #00897b;
      --secondary-color: #00695c;
      --accent-color: #26a69a;
      --text-color: #333;
      --background-color: #f5f5f5;
    }

    body {
      font-family: 'Roboto', sans-serif;
      background-color: var(--background-color);
      color: var(--text-color);
    }

    .navbar {
      background-color: var(--primary-color);
      padding: 0 20px;
    }

    .navbar .brand-logo {
      font-size: 1.5rem;
    }

    .sidenav {
      background-color: white;
      padding-top: 20px;
    }

    .hero-section {
      background: linear-gradient(rgba(0,0,0,0.5), rgba(0,0,0,0.5)), url('https://placehold.co/1200x400');
      background-size: cover;
      background-position: center;
      color: white;
      padding: 100px 0;
      text-align: center;
      margin-bottom: 20px;
    }

    .destination-card {
      background: white;
      border-radius: 8px;
      margin: 10px 0;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
      transition: transform 0.2s;
      cursor: pointer;
    }

    .destination-card:hover {
      transform: translateY(-2px);
    }

    .destination-card img {
      border-radius: 8px 8px 0 0;
      height: 200px;
      object-fit: cover;
    }

    .quick-actions {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
      gap: 15px;
      margin: 20px 0;
    }

    .action-button {
      background: white;
      border-radius: 8px;
      padding: 15px;
      text-align: center;
      cursor: pointer;
      transition: all 0.2s;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }

    .action-button:hover {
      background: var(--accent-color);
      color: white;
    }

    .action-button i {
      font-size: 2rem;
      margin-bottom: 10px;
      color: var(--primary-color);
    }

    .action-button:hover i {
      color: white;
    }

    .deals-section {
      background: white;
      border-radius: 8px;
      padding: 20px;
      margin: 20px 0;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }

    .deal-item {
      padding: 10px;
      border-bottom: 1px solid #eee;
      cursor: pointer;
    }

    .deal-item:hover {
      background: #f5f5f5;
    }

    .price-tag {
      font-size: 1.5rem;
      font-weight: bold;
      color: var(--primary-color);
    }

    .loading-overlay {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0,0,0,0.5);
      z-index: 9999;
      justify-content: center;
      align-items: center;
    }

    .loading-spinner {
      width: 50px;
      height: 50px;
      border: 3px solid #f3f3f3;
      border-top: 3px solid var(--primary-color);
      border-radius: 50%;
      animation: spin 1s linear infinite;
    }

    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }

    @media (max-width: 600px) {
      .quick-actions {
        grid-template-columns: repeat(2, 1fr);
      }
    }

    #pdKeyModal {
      max-width: 400px;
    }

    .modal {
      border-radius: 8px;
    }

    .modal .modal-content {
      padding: 24px;
    }
  </style>
</head>
<body>
  <!-- PagerDuty Key Modal -->
  <div id="pdKeyModal" class="modal">
    <div class="modal-content">
      <h4>Enter PagerDuty Integration Key</h4>
      <p>This key is required to simulate travel booking system alerts.</p>
      <div class="input-field">
        <input type="password" id="pdKey" class="validate">
        <label for="pdKey">Integration Key</label>
      </div>
    </div>
    <div class="modal-footer">
      <a href="#!" class="modal-close waves-effect waves-green btn">Save</a>
    </div>
  </div>

  <!-- Loading Overlay -->
  <div class="loading-overlay" id="loadingOverlay">
    <div class="loading-spinner"></div>
  </div>

  <!-- Navigation -->
  <nav class="navbar">
    <div class="nav-wrapper">
      <a href="#!" class="brand-logo">DreamVacations</a>
      <a href="#" data-target="mobile-nav" class="sidenav-trigger"><i class="material-icons">menu</i></a>
      <ul class="right hide-on-med-and-down">
        <li><a href="#!" class="nav-link" data-action="flights"><i class="material-icons left">flight</i>Flights</a></li>
        <li><a href="#!" class="nav-link" data-action="hotels"><i class="material-icons left">hotel</i>Hotels</a></li>
        <li><a href="#!" class="nav-link" data-action="cars"><i class="material-icons left">directions_car</i>Car Rental</a></li>
        <li><a href="#!" class="nav-link" data-action="packages"><i class="material-icons left">beach_access</i>Packages</a></li>
        <li><a href="#!" id="pdKeyButton"><i class="material-icons left">vpn_key</i>PD Key</a></li>
      </ul>
    </div>
  </nav>

  <!-- Mobile Navigation -->
  <ul class="sidenav" id="mobile-nav">
    <li><a href="#!" class="nav-link" data-action="flights"><i class="material-icons left">flight</i>Flights</a></li>
    <li><a href="#!" class="nav-link" data-action="hotels"><i class="material-icons left">hotel</i>Hotels</a></li>
    <li><a href="#!" class="nav-link" data-action="cars"><i class="material-icons left">directions_car</i>Car Rental</a></li>
    <li><a href="#!" class="nav-link" data-action="packages"><i class="material-icons left">beach_access</i>Packages</a></li>
    <li><a href="#!" id="pdKeyButtonMobile"><i class="material-icons left">vpn_key</i>PD Key</a></li>
  </ul>

  <!-- Hero Section -->
  <div class="hero-section">
    <h2>Your Dream Vacation Awaits</h2>
    <p class="flow-text">Discover amazing destinations around the world</p>
    <a class="waves-effect waves-light btn-large" data-action="search">Start Planning</a>
  </div>

  <!-- Main Content -->
  <div class="container">
    <!-- Quick Actions -->
    <div class="quick-actions">
      <div class="action-button" data-action="flights">
        <i class="material-icons">flight_takeoff</i>
        <div>Book Flights</div>
      </div>
      <div class="action-button" data-action="hotels">
        <i class="material-icons">hotel</i>
        <div>Find Hotels</div>
      </div>
      <div class="action-button" data-action="cars">
        <i class="material-icons">directions_car</i>
        <div>Rent a Car</div>
      </div>
      <div class="action-button" data-action="activities">
        <i class="material-icons">map</i>
        <div>Activities</div>
      </div>
    </div>

    <!-- Popular Destinations -->
    <h5>Popular Destinations</h5>
    <div class="row">
      <div class="col s12 m6 l4">
        <div class="destination-card" data-action="booking">
          <img src="https://placehold.co/400x200" alt="Bali">
          <div class="card-content">
            <span class="card-title">Bali, Indonesia</span>
            <p>Experience tropical paradise</p>
            <div class="price-tag">From $899</div>
          </div>
        </div>
      </div>
      <div class="col s12 m6 l4">
        <div class="destination-card" data-action="booking">
          <img src="https://placehold.co/400x200" alt="Paris">
          <div class="card-content">
            <span class="card-title">Paris, France</span>
            <p>City of Love and Lights</p>
            <div class="price-tag">From $799</div>
          </div>
        </div>
      </div>
      <div class="col s12 m6 l4">
        <div class="destination-card" data-action="booking">
          <img src="https://placehold.co/400x200" alt="Maldives">
          <div class="card-content">
            <span class="card-title">Maldives</span>
            <p>Paradise on Earth</p>
            <div class="price-tag">From $1299</div>
          </div>
        </div>
      </div>
    </div>

    <!-- Special Deals -->
    <div class="deals-section">
      <h5>Special Deals</h5>
      <div class="deal-item" data-action="booking">
        <div class="row">
          <div class="col s8">
            <h6>Summer in Greece</h6>
            <p>7 days package including flights and hotels</p>
          </div>
          <div class="col s4 right-align">
            <div class="price-tag">$999</div>
            <span class="grey-text">Save 30%</span>
          </div>
        </div>
      </div>
      <div class="deal-item" data-action="booking">
        <div class="row">
          <div class="col s8">
            <h6>Dubai Adventure</h6>
            <p>5 days luxury experience</p>
          </div>
          <div class="col s4 right-align">
            <div class="price-tag">$1299</div>
            <span class="grey-text">Save 25%</span>
          </div>
        </div>
      </div>
      <div class="deal-item" data-action="booking">
        <div class="row">
          <div class="col s8">
            <h6>Thailand Explorer</h6>
            <p>10 days complete package</p>
          </div>
          <div class="col s4 right-align">
            <div class="price-tag">$899</div>
            <span class="grey-text">Save 35%</span>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Scripts -->
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
  
  <script>
    // Alert payloads for different travel actions
    const alertPayloads = {
      flights: {
        payload: {
          summary: "Flight Booking Service Degraded - Latency {{int(2000,5000)}}ms",
          severity: "warning",
          source: "booking-service",
          class: "ServiceDegradation",
          component: "flight-booking",
          group: "Travel-Core",
          custom_details: {
            latency: "{{int(2000,5000)}}ms",
            affected_operations: "flight-search",
            error_rate: "{{int(5,15)}}%",
            impact: "Delayed flight search and booking"
          }
        }
      },
      search: {
        payload: {
          summary: "Search Service Error - Success rate {{int(60,85)}}%",
          severity: "critical",
          source: "search-engine",
          class: "SearchFailure",
          component: "travel-search",
          group: "Travel-Core",
          custom_details: {
            success_rate: "{{int(60,85)}}%",
            affected_services: "global-search, availability-check",
            error_type: "timeout",
            impact: "Search functionality degraded"
          }
        }
      },
      booking: {
        payload: {
          summary: "Booking System Critical Error - Success rate {{int(50,75)}}%",
          severity: "critical",
          source: "booking-system",
          class: "TransactionFailure",
          component: "reservation-engine",
          group: "Travel-Core",
          custom_details: {
            success_rate: "{{int(50,75)}}%",
            affected_services: "reservations, payments",
            transaction_type: "booking",
            impact: "Failed booking transactions",
            message: "Booking service experiencing {{int(50,75)}}% transaction failure rate",
            service: "booking-engine-prod",
            namespace: "travel-services",
            node: "booking-proc-pod-east1-001",
            failureCount: "{{int(800,1500)}}",
            lastSuccessfulTransaction: "2025-04-27T14:25:00Z",
            sla_impact: "Critical - Booking System Degraded",
            recommended_action: "Immediate investigation required",
            error_details: {
              error_code: "BOOK-503",
              error_type: "SYSTEM_OVERLOAD",
              affected_endpoints: [
                "api.booking-system.com/v1/reserve",
                "api.booking-system.com/v1/availability"
              ],
              response_time: "{{int(10000,20000)}}ms",
              http_status: 503
            },
            business_impact: {
              revenue_risk: "High",
              customer_impact: "All booking transactions affected",
              transaction_value_at_risk: "${{int(1,5)}}M/hour"
            }
          }
        }
      },
      database: {
        payload: {
          summary: "travel-db-01 CPU Usage Critical: {{int(85,95)}}% - system performance degraded",
          severity: "critical",
          source: "database-cluster",
          class: "Infrastructure",
          component: "main-db",
          group: "Travel-Infrastructure",
          custom_details: {
            affected_nodes: "{{int(2,5)}}",
            response_time: "{{int(500,2000)}}ms",
            impact: "Slow search and booking processing",
            replication_lag: "{{int(30,120)}}s"
          }
        }
      }
    };

    // Initialize components
    document.addEventListener('DOMContentLoaded', function() {
      M.AutoInit();
      checkPagerDutyKey();
    });

    // Check if PagerDuty key exists
    function checkPagerDutyKey() {
      const pdKey = localStorage.getItem('pdKey');
      if (!pdKey) {
        openPdKeyModal();
      }
    }

    // Open PagerDuty key modal
    function openPdKeyModal() {
      const modal = M.Modal.getInstance(document.getElementById('pdKeyModal'));
      modal.open();
    }

    // Save PagerDuty key
    document.querySelector('#pdKeyModal .modal-close').addEventListener('click', function() {
      const pdKey = document.getElementById('pdKey').value;
      if (pdKey) {
        localStorage.setItem('pdKey', pdKey);
        M.toast({html: 'PagerDuty key saved successfully'});
      }
    });

    // PD Key button click handlers
    document.getElementById('pdKeyButton').addEventListener('click', openPdKeyModal);
    document.getElementById('pdKeyButtonMobile').addEventListener('click', openPdKeyModal);

    // Helper function to replace random templates
    function replaceRandomTemplates(str) {
      return str.replace(/{{int\((\d+),\s*(\d+)\)}}/g, function(match, min, max) {
        min = parseInt(min);
        max = parseInt(max);
        return Math.floor(Math.random() * (max - min + 1)) + min;
      });
    }

    // Show loading overlay
    function showLoading() {
      document.getElementById('loadingOverlay').style.display = 'flex';
    }

    // Hide loading overlay
    function hideLoading() {
      document.getElementById('loadingOverlay').style.display = 'none';
    }

    // Trigger PagerDuty alert
    async function triggerPagerDutyAlert(alertType) {
      const pdKey = localStorage.getItem('pdKey');
      if (!pdKey) {
        M.toast({html: 'Please set your PagerDuty integration key first'});
        openPdKeyModal();
        return;
      }

      const payload = alertPayloads[alertType];
      if (!payload) return;

      showLoading();

      try {
        const processedPayload = {
          routing_key: pdKey,
          event_action: "trigger",
          payload: JSON.parse(replaceRandomTemplates(JSON.stringify(payload.payload)))
        };

        const response = await fetch('https://events.pagerduty.com/v2/enqueue', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify(processedPayload)
        });

        if (response.ok) {
          M.toast({html: 'Error!!! Please Try Again.'});
        } else {
          throw new Error('Failed to trigger alert');
        }
      } catch (error) {
        M.toast({html: `Error: ${error.message}`});
      } finally {
        hideLoading();
      }
    }

    // Add click handlers for various actions
    document.querySelectorAll('[data-action]').forEach(element => {
      element.addEventListener('click', function() {
        const action = this.dataset.action;
        if (action) {
          triggerPagerDutyAlert(action);
        }
        showLoading();
        setTimeout(hideLoading, 2000);
      });
    });

    // Simulate occasional search issues
    setInterval(() => {
      if (Math.random() < 0.1) { // 10% chance every 30 seconds
        triggerPagerDutyAlert('search');
      }
    }, 30000);

    // Simulate occasional database issues
    setInterval(() => {
      if (Math.random() < 0.05) { // 5% chance every 45 seconds
        triggerPagerDutyAlert('database');
      }
    }, 45000);
  </script>
</body>
</html>